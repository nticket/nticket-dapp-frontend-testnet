(function(){var t={320:function(t,e,n){"use strict";n(2467);var a=n(5361),i=n(1618),o=n(5676),c=n(4659),s=n(5413),r=n(7711),l=n(8015),u=n(9693),d=n(9153),g=n(7139),m=n(9242),k=n(3396);const f=(0,k.Uk)("NTicket"),h=(0,k.Uk)("Events"),p=(0,k.Uk)("My Tickets"),w=(0,k.Uk)("Events Management"),v=(0,k.Uk)("© NTicket, 2022");function _(t,e,n,a,i,o){const c=(0,k.up)("RouterLink"),s=(0,k.up)("AMenuItem"),r=(0,k.up)("AMenu"),l=(0,k.up)("ALayoutHeader"),u=(0,k.up)("RouterView"),d=(0,k.up)("ALayoutContent"),g=(0,k.up)("ALayoutFooter"),m=(0,k.up)("ALayout");return(0,k.wg)(),(0,k.j4)(m,{class:"app-layout"},{default:(0,k.w5)((()=>[(0,k.Wm)(l,{class:"header"},{default:(0,k.w5)((()=>[(0,k.Wm)(c,{class:"logo header__logo",to:"/"},{default:(0,k.w5)((()=>[f])),_:1}),(0,k.Wm)(r,{selectedKeys:t.selectedKeys,"onUpdate:selectedKeys":e[3]||(e[3]=e=>t.selectedKeys=e),theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},{default:(0,k.w5)((()=>[(0,k.Wm)(s,{key:"1",onClick:e[0]||(e[0]=e=>t.router.push("/events"))},{default:(0,k.w5)((()=>[h])),_:1}),(0,k.Wm)(s,{key:"2",onClick:e[1]||(e[1]=e=>t.router.push("/my-tickets"))},{default:(0,k.w5)((()=>[p])),_:1}),(0,k.Wm)(s,{key:"3",onClick:e[2]||(e[2]=e=>t.router.push("/events-management"))},{default:(0,k.w5)((()=>[w])),_:1})])),_:1},8,["selectedKeys"])])),_:1}),(0,k.Wm)(d,{class:"app-layout__content"},{default:(0,k.w5)((()=>[(0,k.Wm)(u)])),_:1}),(0,k.Wm)(g,null,{default:(0,k.w5)((()=>[v])),_:1})])),_:1})}var y=n(4870),b=n(9049);const{keyStores:C}=b,S=(0,g.Q_)("NearStore",{state(){return{inited:!1,instance:null,wallet:null,isSignedIn:!1,accountId:null,account:null}},actions:{async init(){this.instance=await b.connect({networkId:"testnet",keyStore:new C.BrowserLocalStorageKeyStore,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",headers:{}}),this.wallet=new b.WalletConnection(this.instance,"nticket"),this.inited=!0,this.isSignedIn=this.wallet.isSignedIn()},async signIn(){if(this.wallet&&!this.wallet.isSignedIn())try{await this.wallet.requestSignIn(),this.isSignedIn=!0,this.getAccountId()}catch(t){}},async signOut(){if(this.wallet&&this.wallet.isSignedIn())try{await this.wallet.signOut(),this.isSignedIn=!1,this.accountId=null,this.wallet=null}catch(t){}},getAccountId(){return!this.accountId&&this.wallet&&(this.accountId=this.wallet.getAccountId()),this.accountId},getAccount(){return!this.account&&this.wallet&&(this.account=this.wallet.account()),this.account}}});var A=n(2483),T=(0,k.aZ)({name:"App",setup(){const t=(0,A.tv)(),e=S();return(0,k.wF)((()=>{e.init()})),{router:t,selectedKeys:(0,y.iH)([""])}}}),E=n(89);const P=(0,E.Z)(T,[["render",_]]);var I=P,D=n(2268);const N={class:"events-list-page"},O={key:0,class:"events-list-page__list"};function U(t,e,n,a,i,o){const c=(0,k.up)("EventCard");return(0,k.wg)(),(0,k.iD)("div",N,[(0,k._)("h1",null,"Events list "+(0,D.zw)(t.events.length),1),t.events.length?((0,k.wg)(),(0,k.iD)("div",O,[((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(t.events,(e=>((0,k.wg)(),(0,k.j4)(c,{key:e.token_series_id,item:e,class:"events-list-page__event-card",onSubmit:n=>t.handleBuyTicket(e.token_series_id,e.price)},null,8,["item","onSubmit"])))),128))])):(0,k.kq)("",!0)])}var B;n(8675),n(3462),n(7380),n(1118),n(2801);(function(t){t["GetEvents"]="nft_get_series",t["BuyEvent"]="nft_buy",t["AddStaff"]="add_checkin_staff",t["RemoveStaff"]="remove_checkin_staff",t["GetMyTickets"]="nft_tokens_for_owner",t["CheckIn"]="check_in",t["AddPublicKey"]="add_public_key"})(B||(B={}));var Z=n(7629),W=n(1044);const{VUE_APP_CONTRACT_ADDRESS:j=""}={NODE_ENV:"production",BASE_URL:"/"},M=1e22,K=(0,g.Q_)("EventsStore",{state(){return{contract:null,events:[],ownedEvents:[],tickets:[]}},actions:{async getContract(){if(!this.contract){const t=S(),e=t.getAccount(),n=[B.GetEvents,B.GetMyTickets],a=[B.BuyEvent,B.AddStaff,B.RemoveStaff,B.AddPublicKey,B.CheckIn],i={};n.forEach((t=>{i[t]=async(n={},a={})=>await e.viewFunction(j,t,n,a)})),a.forEach((t=>{i[t]=async(n={},a={})=>await e.functionCall({contractId:j,methodName:t,args:n,gas:a.gas,attachedDeposit:a.attachedDeposit,walletCallbackUrl:a.callbackUrl||window.location.href})})),this.contract=i}return this.contract},async getEvents(){const t=await this.getContract(),e=await(t?.[B.GetEvents]?.({from_index:"0",limit:5}));return e?.length&&(this.events=e,console.log(Array.from(e))),this.events},async getOwnedEvents(){const t=S();return await t.getAccount(),t.account?(this.ownedEvents=await t.account.viewFunction({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_CONTRACT_ADDRESS||"","nft_token_series_for_owner",{account_id:t.account.accountId,from_index:"0",limit:10}),this.ownedEvents):[]},async getMyTickets(){const t=S(),e=await t.getAccountId();if(null===e)return null;const n=await this.getContract(),a=await(n?.[B.GetMyTickets]?.({account_id:e,from_index:"0",limit:10}));return a?.length&&(this.tickets=a,console.log(Array.from(a))),this.tickets},async getOwnedEventById(t){const e=S();if(await e.getAccount(),e.account){const n=await e.account.viewFunction({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_CONTRACT_ADDRESS||"","nft_get_series_single",{token_series_id:t});return console.log(n),n}return null},async removeStaff(t,e){const n=await this.getContract();return await(n?.[B.RemoveStaff]?.({token_series_id:t,account_id:e},{gas:3e14,attachedDeposit:1,walletCallbackUrl:window.location.href})),null},async addStaff(t,e){const n=await this.getContract();return await(n?.[B.AddStaff]?.({token_series_id:t,account_id:e},{gas:3e14,attachedDeposit:1,walletCallbackUrl:window.location.href})),null},async generateCheckinParams(t){const e=W,n=await this.getPublicKeyForTicket(t),a=S(),i=await a.getAccountId(),o=Math.floor(Date.now()/1e3),c=JSON.parse(n),s=t+";"+i+";"+o;console.log(s);const r=this._arrayBufferToBase64(c.publicKey,32),l=new Uint8Array(Object.keys(c.secretKey).map((function(t){return c.secretKey[t]}))),u=this._arrayBufferToBase64(e.sign((new TextEncoder).encode(s),l),64);return console.log("Public Key: "+r),console.log("Signature: "+u),{timestamp:o,signature:u,account_id:i,token_id:t}},async getPublicKeyForTicket(t){const e=W;let n=localStorage.getItem("key");if(console.log(n),null===n){n=JSON.stringify(e.sign.keyPair()),localStorage.setItem("key",n);const a=JSON.parse(n),i=this._arrayBufferToBase64(a.publicKey,32);console.log(i);const o=await this.getContract();await(o?.[B.AddPublicKey]?.({public_key_base64:i},{gas:3e14,attachedDeposit:1,callbackUrl:window.location.href+"?showCheckinData="+t}))}return n},_arrayBufferToBase64(t,e){let n="";const a=Object.values(t).slice(0,e),i=new Uint8Array(a),o=i.byteLength;for(let c=0;c<o;c++)n+=String.fromCharCode(i[c]);return btoa(n)},async markTicketUsed(t,e,n,a){const i=await this.getContract();return await(i?.[B.CheckIn]?.({token_id:t,signature_base64:e,account_id:n,timestamp:parseInt(a)},{gas:3e14,attachedDeposit:1,walletCallbackUrl:window.location.href+"?successFull"})),null},_yoctoNearToNear(t){try{return b.utils.format.formatNearAmount(String(t))}catch(e){return 0}},async buyTicket(t,e){const n=S(),a=await this.getContract();await(a?.[B.BuyEvent]?.({token_series_id:t,receiver_id:String(n.getAccountId())},{gas:3e14,attachedDeposit:new Z.BigNumber(e).plus(new Z.BigNumber(M)).toFixed()}))}}}),L=["src"],H={class:"event-card__price"},R=(0,k._)("span",{class:"near-symbol"},"Ⓝ",-1),q=(0,k.Uk)("Buy");function x(t,e,n,a,i,o){const c=(0,k.up)("ACardMeta"),s=(0,k.up)("AButton"),r=(0,k.up)("ACard"),l=(0,k.up)("ABadgeRibbon");return(0,k.wg)(),(0,k.j4)(l,{text:t.formattedPrice+" Near"},{default:(0,k.w5)((()=>[(0,k.Wm)(r,{hoverable:"",class:"event-card"},{cover:(0,k.w5)((()=>[(0,k._)("img",{src:t.item.metadata.media},null,8,L)])),actions:(0,k.w5)((()=>[(0,k.Wm)(s,{onClick:t.handleSubmit},{default:(0,k.w5)((()=>[q])),_:1},8,["onClick"])])),default:(0,k.w5)((()=>[(0,k.Wm)(c,{title:t.item.metadata.title,description:t.item.metadata.description},null,8,["title","description"]),(0,k._)("p",H,[(0,k.Uk)("Price: "+(0,D.zw)(t.formattedPrice)+" ",1),R])])),_:1})])),_:1},8,["text"])}const F=(0,k.aZ)({name:"EventCard",props:{item:{type:Object,required:!0}},emits:["submit"],setup(t,{emit:e}){const n=K(),a=(0,k.Fl)((()=>n._yoctoNearToNear(t.item.price))),i=()=>e("submit");return{formattedPrice:a,handleSubmit:i}}});var V=F;const Y=(0,E.Z)(V,[["render",x]]);var z=Y;const J=(0,k.aZ)({name:"EventsListPage",components:{EventCard:z},setup(){const t=K(),{events:e}=(0,g.Jk)(t);(0,k.bv)((()=>{t.getEvents()}));const n=async(e,n)=>{r.Z.confirm({title:"Wanna this? Huh?",content:"Wat?",onOk(){t.buyTicket(e,n)}})};return{events:e,handleBuyTicket:n,formatPrice:t._yoctoNearToNear,selectedKeys:(0,y.iH)(["1"])}}});var G=J;const Q=(0,E.Z)(G,[["render",U]]);var $=Q;const X={class:"events-list-page"},tt=(0,k._)("h1",null,"Management of your Events",-1),et={key:0,class:"events-list-page__list"};function nt(t,e,n,a,i,o){const c=(0,k.up)("EventCard");return(0,k.wg)(),(0,k.iD)("div",X,[tt,t.ownedEvents.length?((0,k.wg)(),(0,k.iD)("div",et,[((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(t.ownedEvents,(e=>((0,k.wg)(),(0,k.j4)(c,{key:e.token_series_id,item:e,class:"events-list-page__event-card",onSubmit:n=>t.handleEditTicket(e.token_series_id)},null,8,["item","onSubmit"])))),128))])):(0,k.kq)("",!0)])}const at=["src"],it={class:"event-card__price"},ot=(0,k._)("span",{class:"near-symbol"},"Ⓝ",-1),ct=(0,k.Uk)("Manage Staff");function st(t,e,n,a,i,o){const c=(0,k.up)("ACardMeta"),s=(0,k.up)("AButton"),r=(0,k.up)("ACard"),l=(0,k.up)("ABadgeRibbon");return(0,k.wg)(),(0,k.j4)(l,{text:t.formattedPrice+" Near"},{default:(0,k.w5)((()=>[(0,k.Wm)(r,{hoverable:"",class:"event-card"},{cover:(0,k.w5)((()=>[(0,k._)("img",{src:t.item.metadata.media},null,8,at)])),actions:(0,k.w5)((()=>[(0,k.Wm)(s,{onClick:t.handleSubmit},{default:(0,k.w5)((()=>[ct])),_:1},8,["onClick"])])),default:(0,k.w5)((()=>[(0,k.Wm)(c,{title:t.item.metadata.title,description:t.item.metadata.description},null,8,["title","description"]),(0,k._)("p",it,[(0,k.Uk)("Price: "+(0,D.zw)(t.formattedPrice)+" ",1),ot])])),_:1})])),_:1},8,["text"])}const rt=(0,k.aZ)({name:"EventCard",props:{item:{type:Object,required:!0}},emits:["submit"],setup(t,{emit:e}){const n=K(),a=(0,k.Fl)((()=>n._yoctoNearToNear(t.item.price))),i=()=>e("submit");return{formattedPrice:a,handleSubmit:i}}});var lt=rt;const ut=(0,E.Z)(lt,[["render",st]]);var dt=ut;const gt=(0,k.aZ)({name:"EventsManagementPage",components:{EventCard:dt},setup(){const t=(0,A.tv)(),e=K(),{ownedEvents:n}=(0,g.Jk)(e);(0,k.bv)((()=>{e.getOwnedEvents()}));const a=async e=>{t.push({path:`/events-management/${e}`})};return{ownedEvents:n,handleEditTicket:a}}});var mt=gt;const kt=(0,E.Z)(mt,[["render",nt]]);var ft=kt;const ht={class:"events-management-staff"},pt={key:0,class:"staff-list"},wt=(0,k._)("h2",null,"Staff List:",-1),vt={key:0},_t={key:1},yt=(0,k._)("p",null,"There is no staff in your event",-1),bt=[yt];function Ct(t,e,n,a,i,o){const c=(0,k.up)("ATag"),s=(0,k.up)("AInputSearch");return(0,k.wg)(),(0,k.iD)("div",ht,[(0,k._)("h1",null,'Checkin Staff for "'+(0,D.zw)(t.event?.metadata?.title)+'"',1),null!==t.event?((0,k.wg)(),(0,k.iD)("div",pt,[wt,null!==t.event&&t.event?.checkin_staff.length>0?((0,k.wg)(),(0,k.iD)("p",vt,[((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(t.event?.checkin_staff,(e=>((0,k.wg)(),(0,k.j4)(c,{item:e,closable:"",onClose:n=>t.removeStaff(t.id,e)},{default:(0,k.w5)((()=>[(0,k.Uk)((0,D.zw)(e),1)])),_:2},1032,["item","onClose"])))),256))])):((0,k.wg)(),(0,k.iD)("div",_t,bt)),(0,k._)("p",null,[(0,k.Wm)(s,{placeholder:"Add Staff","enter-button":"Add",size:"large",onSearch:t.addStaff},null,8,["onSearch"])])])):(0,k.kq)("",!0)])}const St=(0,k.aZ)({name:"EventsManagementStaffPage",setup(){const t=(0,A.yj)(),e=K(),n=(0,y.iH)(),a=t.params.id;(0,k.bv)((async()=>{e.getOwnedEvents(),n.value=await e.getOwnedEventById(a)}));const i=async function(t,n){return await e.removeStaff(t,n),!0},o=async function(t){return await e.addStaff(a,t),!0};return{id:a,event:n,utils:b.utils,removeStaff:i,addStaff:o}}});var At=St;const Tt=(0,E.Z)(At,[["render",Ct]]);var Et=Tt;const Pt={class:"home-page"},It=(0,k._)("h1",null,"HomePage",-1),Dt=(0,k.Uk)(" Show Events "),Nt=(0,k.Uk)(" Manage My Events ");function Ot(t,e,n,a,i,o){const c=(0,k.up)("NearIsConnectedPage"),s=(0,k.up)("ConnectWalletPage"),r=(0,k.up)("RouterLink");return(0,k.wg)(),(0,k.iD)("div",Pt,[It,t.isSignedIn?((0,k.wg)(),(0,k.j4)(c,{key:0})):(0,k.kq)("",!0),t.isSignedIn?(0,k.kq)("",!0):((0,k.wg)(),(0,k.j4)(s,{key:1})),t.isSignedIn?((0,k.wg)(),(0,k.j4)(r,{key:2,class:"home-page__events-link",to:"/events"},{default:(0,k.w5)((()=>[Dt])),_:1})):(0,k.kq)("",!0),t.isSignedIn?((0,k.wg)(),(0,k.j4)(r,{key:3,class:"home-page__events-link",to:"/events-management"},{default:(0,k.w5)((()=>[Nt])),_:1})):(0,k.kq)("",!0)])}const Ut={class:"connect-wallet-page"},Bt=(0,k._)("h2",null,"Connect Wallet",-1);function Zt(t,e,n,a,i,o){const c=(0,k.up)("NearConnectButton");return(0,k.wg)(),(0,k.iD)("div",Ut,[Bt,(0,k.Wm)(c)])}const Wt=(0,k.Uk)("Connect wallet");function jt(t,e,n,a,i,o){const c=(0,k.up)("AButton");return(0,k.wg)(),(0,k.j4)(c,{onClick:t.signIn},{default:(0,k.w5)((()=>[Wt])),_:1},8,["onClick"])}const Mt=(0,k.aZ)({name:"NearConnectButton",setup(){const t=S();return{signIn:t.signIn}}});var Kt=Mt;const Lt=(0,E.Z)(Kt,[["render",jt]]);var Ht=Lt;const Rt=(0,k.aZ)({name:"ConnectWalletPage",components:{NearConnectButton:Ht}});var qt=Rt;const xt=(0,E.Z)(qt,[["render",Zt]]);var Ft=xt;const Vt={class:"near-connected-page"},Yt=(0,k._)("h1",null,"Your wallet",-1);function zt(t,e,n,a,i,o){const c=(0,k.up)("NearSignOutButton");return(0,k.wg)(),(0,k.iD)("div",Vt,[Yt,(0,k._)("p",null,(0,D.zw)(t.accountId),1),(0,k.Wm)(c)])}const Jt=(0,k.Uk)("Disconnect wallet");function Gt(t,e,n,a,i,o){const c=(0,k.up)("AButton");return(0,k.wg)(),(0,k.j4)(c,{onClick:t.signOut},{default:(0,k.w5)((()=>[Jt])),_:1},8,["onClick"])}const Qt=(0,k.aZ)({name:"NearSignOutButton",setup(){const t=S();return{signOut:t.signOut}}});var $t=Qt;const Xt=(0,E.Z)($t,[["render",Gt]]);var te=Xt;const ee=(0,k.aZ)({name:"NearIsConnectedPage",components:{NearSignOutButton:te},setup(){const t=S(),{accountId:e}=(0,g.Jk)(t);return(0,k.bv)((()=>{t.getAccountId()})),{accountId:e}}});var ne=ee;const ae=(0,E.Z)(ne,[["render",zt]]);var ie=ae;const oe=(0,k.aZ)({name:"HomePage",components:{ConnectWalletPage:Ft,NearIsConnectedPage:ie},setup(){const t=S(),{isSignedIn:e,inited:n}=(0,g.Jk)(t);return{isSignedIn:e,inited:n}}});var ce=oe;const se=(0,E.Z)(ce,[["render",Ot]]);var re=se;const le={class:"events-list-page"},ue=(0,k._)("h1",null,"My tickets",-1),de=(0,k.Uk)(" 1111 "),ge=(0,k.Uk)(" 222 "),me={key:0,class:"events-list-page__list"};function ke(t,e,n,a,i,o){const c=(0,k.up)("TicketCard");return(0,k.wg)(),(0,k.iD)("div",le,[ue,(0,k.Uk)(" "+(0,D.zw)(t.showCheckinTicket)+" ",1),null!==t.showCheckinTicket?((0,k.wg)(),(0,k.iD)(k.HY,{key:0},[de,((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(t.tickets,(e=>((0,k.wg)(),(0,k.iD)(k.HY,null,[e.token_id===t.showCheckinTicket?((0,k.wg)(),(0,k.j4)(c,{key:e.token_series_id,item:e,checkinLink:t.checkinLink,class:"events-list-page__event-card",onSubmit:n=>t.handleCheckinTicket(e.token_id)},null,8,["item","checkinLink","onSubmit"])):(0,k.kq)("",!0)],64)))),256))],64)):((0,k.wg)(),(0,k.iD)(k.HY,{key:1},[ge,t.tickets.length?((0,k.wg)(),(0,k.iD)("div",me,[((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(t.tickets,(e=>((0,k.wg)(),(0,k.j4)(c,{key:e.token_series_id,item:e,class:"events-list-page__event-card",onSubmit:n=>t.handleCheckinTicket(e.token_id)},null,8,["item","onSubmit"])))),128))])):(0,k.kq)("",!0)],64))])}const fe=["innerHTML"],he=(0,k.Uk)("Start Checkin");function pe(t,e,n,a,i,o){const c=(0,k.up)("ACardMeta"),s=(0,k.up)("AButton"),r=(0,k.up)("ACard"),l=(0,k.up)("ABadgeRibbon");return(0,k.wg)(),(0,k.j4)(l,{text:t.formattedPrice+" Near"},{default:(0,k.w5)((()=>[(0,k.Wm)(r,{hoverable:"",class:"event-card"},{cover:(0,k.w5)((()=>[])),actions:(0,k.w5)((()=>[(0,k.Wm)(s,{onClick:t.handleSubmit},{default:(0,k.w5)((()=>[he])),_:1},8,["onClick"])])),default:(0,k.w5)((()=>[(0,k._)("div",{innerHTML:t.item.metadata.media},null,8,fe),(0,k.Wm)(c,{title:t.item.metadata.title,description:t.item.metadata.description},null,8,["title","description"])])),_:1})])),_:1},8,["text"])}const we=(0,k.aZ)({name:"TicketCard",props:{item:{type:Object,required:!0}},emits:["submit"],setup(t,{emit:e}){const n=K(),a=(0,k.Fl)((()=>n._yoctoNearToNear(t.item.price))),i=()=>e("submit");return{formattedPrice:a,handleSubmit:i,btoa:btoa}}});var ve=we;const _e=(0,E.Z)(ve,[["render",pe]]);var ye=_e;const be=(0,k.aZ)({name:"TicketsListPage",components:{TicketCard:ye},setup(){const t=(0,A.yj)(),e=K(),{tickets:n}=(0,g.Jk)(e);let a="",i=null;(0,k.bv)((async()=>{e.getMyTickets();const n=t.query.showCheckinData;if(void 0!==n){const t=await e.generateCheckinParams(n);console.log(t),a=window.location.host+"/checkin?timestamp="+t.timestamp+"&signature="+encodeURIComponent(t.signature)+"&account_id="+t.account_id+"&token_id="+t.token_id,i=t.token_id,console.log(a),console.log(i)}}));const o=async t=>{r.Z.confirm({title:"Wanna this? Huh?",content:"Wat?",async onOk(){const n=await e.generateCheckinParams(t);a=window.location.host+"/checkin?timestamp="+n.timestamp+"&signature="+encodeURIComponent(n.signature)+"&account_id="+n.account_id+"&token_id="+n.token_id,console.log(a),console.log(i),console.log(n)}})};return{tickets:n,checkinLink:a,showCheckinTicket:i,handleCheckinTicket:o,formatPrice:e._yoctoNearToNear,selectedKeys:(0,y.iH)(["1"])}}});var Ce=be;const Se=(0,E.Z)(Ce,[["render",ke]]);var Ae=Se;const Te={class:"checkin-page"},Ee=(0,k._)("h1",null,"Checkin Staff Page",-1),Pe={key:0},Ie=(0,k._)("h2",null,"Validate Ticket",-1),De=(0,k.Uk)("Mark Ticket as Used"),Ne={key:1},Oe=(0,k._)("p",null,"Wrong params to validate ticket :(",-1),Ue=[Oe],Be={key:1};function Ze(t,e,n,a,i,o){const c=(0,k.up)("Button");return(0,k.wg)(),(0,k.iD)("div",Te,[Ee,t.isLoading?((0,k.wg)(),(0,k.iD)("p",Be,"Loading...")):((0,k.wg)(),(0,k.iD)(k.HY,{key:0},[t.isValid?((0,k.wg)(),(0,k.iD)("div",Pe,[Ie,(0,k._)("p",null,[(0,k.Wm)(c,{onClick:t.handleMarkTicketUsed},{default:(0,k.w5)((()=>[De])),_:1},8,["onClick"])])])):((0,k.wg)(),(0,k.iD)("div",Ne,Ue))],64))])}const We=(0,k.aZ)({name:"CheckinPage",setup(){const t=(0,A.yj)();let e=!0,n=!0;const a=K(),i=t.query.timestamp,o=t.query.signature,c=t.query.token_id,s=t.query.account_id;void 0!==i&&void 0!==o&&void 0!==c&&void 0!==s||(e=!1),n=!1;const r=async function(){console.log(c,o,c,s),console.log("Go"),await a.markTicketUsed(c,o,s,i)};return{handleMarkTicketUsed:r,isLoading:n,isValid:e}}});var je=We;const Me=(0,E.Z)(je,[["render",Ze]]);var Ke=Me;const Le=[{path:"/",component:re},{path:"/events",component:$},{path:"/events-management",component:ft},{path:"/events-management/:id",component:Et},{path:"/my-tickets",component:Ae},{path:"/checkin",component:Ke},{path:"/:pathMatch(.*)*",name:"NotFound",template:"<h1>Not Found</h1>"}];var He=(0,A.p7)({history:(0,A.PO)(),routes:Le});globalThis.Buffer=a.Buffer;const Re=(0,m.ri)(I),qe=(0,g.WB)();Re.use(i.ZP),Re.use(o.Z),Re.use(c.ZP),Re.use(s.ZP),Re.use(r.Z),Re.use(l.Z),Re.use(u.ZP),Re.use(d.ZP),Re.use(qe),Re.use(He),Re.mount("#app")},6601:function(){},3105:function(){},5024:function(){}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,a,i,o){if(!a){var c=1/0;for(u=0;u<t.length;u++){a=t[u][0],i=t[u][1],o=t[u][2];for(var s=!0,r=0;r<a.length;r++)(!1&o||c>=o)&&Object.keys(n.O).every((function(t){return n.O[t](a[r])}))?a.splice(r--,1):(s=!1,o<c&&(c=o));if(s){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,c=a[0],s=a[1],r=a[2],l=0;if(c.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(r)var u=r(n)}for(e&&e(a);l<c.length;l++)o=c[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},a=self["webpackChunknticket_dapp"]=self["webpackChunknticket_dapp"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(320)}));a=n.O(a)})();
//# sourceMappingURL=app.945815e3.js.map